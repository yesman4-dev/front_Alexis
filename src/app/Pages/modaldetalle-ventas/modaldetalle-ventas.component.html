<h2 mat-dialog-title style="color: blue;">Factura de Venta #{{ venta.id }}</h2>

<mat-dialog-content>
  <p><strong>Fecha:</strong> {{ venta.fechaRegistro | date:'short' }}</p>
  <p><strong>CLiente:</strong> {{ venta.clienteNombre }}</p>
  <p><strong>Usuario:</strong> {{ venta.usuarioNombre }}</p>
   <p><strong>Cobro x Envio:</strong> {{ venta.cobroPorEnvio }}</p>
  <p><strong>Tipo de TransacciÃ³n:</strong> {{ venta.tipoTransaccionNombre }}</p>

  <mat-divider></mat-divider>
  <br />

  <table mat-table [dataSource]="venta.detalleVentas" class="mat-elevation-z2 full-width-table">

    <!-- Producto -->
    <ng-container matColumnDef="productoNombre">
      <th mat-header-cell *matHeaderCellDef> Producto </th>
      <td mat-cell *matCellDef="let d"> {{ d.productoNombre }} </td>
    </ng-container>

      <!-- unidad en la que se vendio -->
    <ng-container matColumnDef="unidadDeMedidaNombre">
      <th mat-header-cell *matHeaderCellDef> Unidad Vendida </th>
      <td mat-cell *matCellDef="let d"> {{ d.unidadDeMedidaNombre }} </td>
    </ng-container>

        
    <ng-container matColumnDef="cantidad">
      <th mat-header-cell *matHeaderCellDef> Cantidad </th>
      <td mat-cell *matCellDef="let d"> {{ d.cantidad }} </td>
    </ng-container>

            
    <ng-container matColumnDef="precioVentaUnitario">
      <th mat-header-cell *matHeaderCellDef>  P. Unitario (L) </th>
      <td mat-cell *matCellDef="let d"> {{ d.precioVentaUnitario }} </td>
    </ng-container>


<!-- SubTotal calculado -->
<ng-container matColumnDef="subtotal">
  <th mat-header-cell *matHeaderCellDef> Subtotal (L) </th>
  <td mat-cell *matCellDef="let d">
    {{ d.cantidad * d.precioVentaUnitario | number:'1.2-2' }}
  </td>
</ng-container>

<!-- Ganancia calculada -->
<ng-container matColumnDef="ganancia">
  <th mat-header-cell *matHeaderCellDef> Utilidad * fila (L) </th>
  <td mat-cell *matCellDef="let d">
    {{ d.ganancia | number:'1.2-2' }}
  </td>
</ng-container>


<tr mat-header-row *matHeaderRowDef="['productoNombre', 'unidadDeMedidaNombre', 'cantidad', 'precioVentaUnitario', 'subtotal', 'ganancia']"></tr>
<tr mat-row *matRowDef="let row; columns: ['productoNombre', 'unidadDeMedidaNombre', 'cantidad', 'precioVentaUnitario', 'subtotal', 'ganancia'];"></tr>

  </table>

  <div class="total-container">
    <strong>Total Utilidad (L):</strong> {{ venta.totalGanancia | number:'1.2-2' }}
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end" class="actions-container">
  
  <button mat-raised-button color="accent" class="rounded-button" (click)="abrirPDF()">
    ðŸ“„ Descargar Ticket
  </button>

  <button mat-stroked-button mat-dialog-close color="primary" class="rounded-button">
    Cerrar
  </button>
</mat-dialog-actions>
